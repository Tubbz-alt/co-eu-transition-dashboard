{% from "govuk/components/date-input/macro.njk" import govukDateInput %}

{% macro dataEntriesContent(groupMeasures, url, metricId, data) %}
  <div>
    <p class="govuk-body govuk-!-font-weight-bold">Current Value</p>
    {% for date, measureByFilter in groupMeasures %}
        <div class="current-value">
        {% for filter, measures in measureByFilter %}
            <p class="govuk-body">{{ date }}
            {% for measure in measures %}
              <span class="filter-value">{{ measure.label + ": " + measure.value if measure.label else measure.value }}</span>
            {% endfor %}
            </p>
        {% endfor %}
        </div>
    {% endfor %}

  <p class="govuk-body govuk-!-font-weight-bold">Add a new value<p>
  <div class="data-entry">
    <form action="{{ url }}/{{ metricId }}" method="post">
      <input type="hidden" name="type" value="entries" />

      {{ govukDateInput({
        name: "field-date"
      }) }}

      {% for date, measureByFilter in groupMeasures %}
        {% if loop.last %}
            {% for filter, measures in measureByFilter %}
              {% for measure in measures %}
                <div class="govuk-form-group">
                {% if measure.label %} <p class="govuk-body govuk-!-font-weight-bold measure-label">{{ measure.label }}</p>{% endif %}
                <label class="govuk-label measure-input" for="entity-{{ measure.id }}">Value
                  <br><input class="govuk-input govuk-input--width-2" type="text" id="entity-{{ measure.id }}" name="entities[{{ measure.id }}]" value="{{ data.entities[measure.id] }}" /></label><br>
                </div>
                {% endfor %}
              {% endfor %}
        {% endif %}
      {% endfor %}
    <button class="govuk-button" data-module="govuk-button" type="submit">Add and save value</button>
    </form>
   </div> 
  </div>
{% endmacro %}