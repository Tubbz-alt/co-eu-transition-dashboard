{% set managementInformationUrls = [
    config.paths.reportingOverview,
    config.paths.allData,
    config.paths.missedMilestones,
    config.paths.upcomingMilestones
    ] 
%}

{% set addDataUrls = [
    config.paths.dataEntry.bulkUpload,
    config.paths.dataEntry.bulkUploadProjectMilestone,
    config.paths.dataEntry.submissionSuccess,
    config.paths.editMilestone
    ] 
%}

{% set adminUrls = [
    config.paths.admin.projectFieldList,
    config.paths.admin.projectField
    ] 
%}

<nav class="navigation">
    <ul id="navigation" class="govuk-header__navigation" aria-label="Top Level Navigation">
    <li class="govuk-header__navigation-item {{ 'govuk-header__navigation-item--active' if url in managementInformationUrls }}">
        <a class="govuk-header__link nav" href="{{ config.paths.allData }}">Management information</a>
    </li>
    {% if req.user.role == 'uploader' or req.user.role == 'administrator' %}
    <li class="govuk-header__navigation-item {{ 'govuk-header__navigation-item--active' if url in addDataUrls }}">
        <a class="govuk-header__link nav" href="{{ config.paths.dataEntry.bulkUploadProjectMilestone }}">
        Add data
        </a>
    </li>
    {% endif %}
    {% if req.user.role == 'administrator' %}
    <li class="govuk-header__navigation-item {{ 'govuk-header__navigation-item--active' if url in adminUrls }}">
        <a class="govuk-header__link nav" href="{{ config.paths.admin.projectFieldList }}">
        Admin
        </a>
    </li>
    {% endif %}
    </ul>
</nav>

{% if url in managementInformationUrls %}
<nav class="child-navigation">
    <ul id="childNavigation" class="govuk-header__navigation" aria-label="Second Level Navigation">
    {% if req.user.hasViewAllPermissions %}
    <li class="govuk-header__navigation-item child-item {{ 'govuk-header__navigation-item--active' if url == config.paths.reportingOverview }}">
        <a class="govuk-header__link child-nav" href="{{ config.paths.reportingOverview }}">
        Reporting overview
        </a>
    </li>
    {% endif %}
    <li class="govuk-header__navigation-item child-item {{ 'govuk-header__navigation-item--active' if url == config.paths.allData }}">
        <a class="govuk-header__link child-nav" href="{{ config.paths.allData }}">
        All data
        </a>
    </li>
    <li class="govuk-header__navigation-item child-item {{ 'govuk-header__navigation-item--active' if url == config.paths.missedMilestones }}">
        <a class="govuk-header__link child-nav" href="{{ config.paths.missedMilestones }}">
        Missed milestones
        </a>
    </li>
    <li class="govuk-header__navigation-item child-item {{ 'govuk-header__navigation-item--active' if url == config.paths.upcomingMilestones }}">
        <a class="govuk-header__link child-nav" href="{{ config.paths.upcomingMilestones }}">
        Upcoming milestones
        </a>
    </li>
    </ul>
</nav>
{% endif %}

{% if url in addDataUrls %}
<nav class="child-navigation">
    <ul id="childNavigation" class="govuk-header__navigation" aria-label="Second Level Navigation">
    <li class="govuk-header__navigation-item child-item govuk-header__navigation-item--active">
        <a class="govuk-header__link child-nav" href="{{ config.paths.dataEntry.bulkUploadProjectMilestone }}">
        Management information
        </a>
    </li>
    </ul>
</nav>
{% endif %}

{% if url in adminUrls %}
<nav class="child-navigation">
    <ul id="childNavigation" class="govuk-header__navigation" aria-label="Second Level Navigation">
    <li class="govuk-header__navigation-item child-item govuk-header__navigation-item--active">
        <a class="govuk-header__link child-nav" href="{{ config.paths.admin.projectFieldList }}">
        MI Data structure
        </a>
    </li>
    </ul>
</nav>
{% endif %}